<!DOCTYPE html>
<!-- saved from url=(0067)https://docs.sqlalchemy.org/en/14/orm/quickstart.html#simple-select -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>
        
        
    
    ORM Quick Start
 —
    SQLAlchemy 1.4 Documentation

        
    </title>

    

    

    <link href="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/css" rel="stylesheet" type="text/css">

    
        <!-- begin iterate through SQLA css_files -->
            <link rel="stylesheet" href="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/pygments.css" type="text/css">
        <!-- end iterate through SQLA css_files -->

        <!-- begin iterate through sphinx environment local css_files -->
            <link rel="stylesheet" href="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/pygments.css" type="text/css">
            <link rel="stylesheet" href="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/default.css" type="text/css">
            <link rel="stylesheet" href="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/copybutton.css" type="text/css">
            <link rel="stylesheet" href="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/docs.css" type="text/css">
            <link rel="stylesheet" href="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/changelog.css" type="text/css">
            <link rel="stylesheet" href="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/sphinx_paramlinks.css" type="text/css">
        <!-- end iterate through sphinx environment local css_files -->

        <link rel="stylesheet" type="text/css" media="all" href="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/bootstrap.min.css">
	    <link rel="stylesheet" type="text/css" media="all" href="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/site.css">
        <link rel="stylesheet" type="text/css" media="all" href="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/carbonads.css">
        <link rel="stylesheet" type="text/css" media="print" href="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/print.css">

        <!-- begin iterate through sphinx environment remote css_files -->
        <!-- end iterate through sphinx environment remote css_files -->
    

    

    

    


    
        <link rel="canonical" href="http://docs.sqlalchemy.org/en/latest/orm/quickstart.html">

    <script type="text/javascript" async="" src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/ga.js"></script><script type="text/javascript">
        var doc_version = "latest";
        var doc_slug = "sqlalchemy";
        var static_root = "../_static"

        // copied from:
        // https://github.com/rtfd/readthedocs.org/commit/edbbb4c753454cf20c128d4eb2fef60d740debaa#diff-2f70e8d9361202bfe3f378d2ff2c510bR8
        var READTHEDOCS_DATA = {
            project: "sqlalchemy",
            version: "latest",
            page: "orm/quickstart",
            theme: ""
          };


    </script>
    <!-- end RTD <head> via SQLAlchemy adapter -->

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="https://docs.sqlalchemy.org/en/14/genindex.html">
    <link rel="search" title="Search" href="https://docs.sqlalchemy.org/en/14/search.html">
        <link rel="copyright" title="Copyright" href="https://docs.sqlalchemy.org/en/14/copyright.html">
    <link rel="top" title="SQLAlchemy 1.4 Documentation" href="https://docs.sqlalchemy.org/en/14/index.html">
        <link rel="up" title="SQLAlchemy ORM" href="https://docs.sqlalchemy.org/en/14/orm/index.html">
        <link rel="next" title="Object Relational Tutorial (1.x API)" href="https://docs.sqlalchemy.org/en/14/orm/tutorial.html">
        <link rel="prev" title="SQLAlchemy ORM" href="https://docs.sqlalchemy.org/en/14/orm/index.html">
    <!-- end layout.mako headers -->




    

    <!-- sqlalchemy.org docs base head -->
    
<link rel="shortcut icon" href="https://www.sqlalchemy.org/favicon.ico" type="image/x-icon">
<link href="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/css(1)" rel="stylesheet" type="text/css">

<script type="text/javascript">
var site_base='//www.sqlalchemy.org';
var docs_base='//docs.sqlalchemy.org';
</script>


    <!-- end sqlalchemy.org docs base head -->

<script id="_carbonads_projs" type="text/javascript" src="https://srv.carbonads.net/ads/CKYILK7Y.json?segment=placement:sqlalchemyorg&amp;callback=_carbonads_go"></script><div id="_bsa_srv-CKYD62QL_0"></div></head>

<body>

<div id="wrap" class="container-xxl wrap px-0">





<nav class="navbar navbar-light logo">
    <div class="container-fluid">
        <a class="navbar-brand" href="https://www.sqlalchemy.org/">
            <img src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/sqla_logo.png" width="240" alt="SQLAlchemy">
        </a>
        <div class="navbar-brand align-self-end dbtoolkit">
            <img src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/dbtoolkit6.gif" width="180" height="12" alt="The Database Toolkit for Python">
        </div>
    </div>
</nav>
<nav class="navbar navbar-expand-md navbar-dark bg-sa-green py-0 navigation">
    <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavigation" aria-controls="navbarNavigation" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <span class="navbar-brand d-md-block d-md-none" href="#">The Database Toolkit for Python</span>
        <div class="collapse navbar-collapse" id="navbarNavigation">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link " href="https://www.sqlalchemy.org/">home</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle " href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#" id="feature-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        features
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark bg-sa-green" aria-labelledby="feature-dropdown">
                        <li><a class="dropdown-item" href="https://www.sqlalchemy.org/features.html">Feature Overview</a></li>
                        <li><a class="dropdown-item" href="https://www.sqlalchemy.org/quotes.html">Testimonials</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link " href="https://www.sqlalchemy.org/blog/">blog</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle active" aria-current="page" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#" id="docs-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        library
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark bg-sa-green" aria-labelledby="docs-dropdown">
                        <li><a class="dropdown-item" href="https://www.sqlalchemy.org/library.html">Library</a>
                        </li><li><a class="dropdown-item" href="https://www.sqlalchemy.org/library.html#reference">Reference</a></li>
                        
    <li><hr class="dropdown-divider"></li>
        <li>
            <a class="dropdown-item" href="https://docs.sqlalchemy.org/en/20/">
                <span class="ps-2">Version 2.0 (beta)</span>
            </a>
        </li>
        <li>
            <a class="dropdown-item" href="https://docs.sqlalchemy.org/en/14/">
                <span class="ps-2">Version 1.4</span>
            </a>
        </li>
        <li>
            <a class="dropdown-item" href="https://docs.sqlalchemy.org/en/13/">
                <span class="ps-2">Version 1.3</span>
            </a>
        </li>
        <li>
            <a class="dropdown-item" href="https://docs.sqlalchemy.org/en/12/">
                <span class="ps-2">Version 1.2</span>
            </a>
        </li>
    <li><hr class="dropdown-divider"></li>

                        <li><a class="dropdown-item" href="https://www.sqlalchemy.org/library.html#architecture">Architecture</a></li>
                        <li><a class="dropdown-item" href="https://www.sqlalchemy.org/library.html#citations">Citing SQLAlchemy</a></li>
                        <li><a class="dropdown-item" href="https://www.sqlalchemy.org/library.html#blog">Blog Posts</a></li>
                        <li><a class="dropdown-item" href="https://www.sqlalchemy.org/library.html#talks">Talks and Tutorials</a></li>
                        <li><a class="dropdown-item" href="https://www.sqlalchemy.org/library.html#recipes">Recipes</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle " href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#" id="community-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        community
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark bg-sa-green" aria-labelledby="community-dropdown">
                        <li><a class="dropdown-item" href="https://www.sqlalchemy.org/support.html">Get Support</a></li>
                        <li><a class="dropdown-item" href="https://www.sqlalchemy.org/participate.html">Participate</a></li>
                        <li><a class="dropdown-item" href="https://www.sqlalchemy.org/develop.html">Develop</a></li>
                        <li><a class="dropdown-item" href="https://www.sqlalchemy.org/codeofconduct.html">Code of Conduct</a></li>
                        <li><a class="dropdown-item" href="https://github.com/sqlalchemy/sqlalchemy">Github</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle " href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#" id="download-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        download
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark bg-sa-green" aria-labelledby="download-dropdown">
                        <li><a class="dropdown-item" href="https://www.sqlalchemy.org/download.html">Download</a>
                        






    </li><li><a class="dropdown-item" href="https://www.sqlalchemy.org/download.html#current">Current Release Series (1.4)</a></li>


    <li><a class="dropdown-item" href="https://www.sqlalchemy.org/download.html#beta">Beta release (2.0)</a></li>
    <li><a class="dropdown-item" href="https://www.sqlalchemy.org/download.html#development">Development Access</a></li>
    <li><a class="dropdown-item" href="https://www.sqlalchemy.org/download.html#license">License</a></li>
    <li><a class="dropdown-item" href="https://www.sqlalchemy.org/download.html#versions">Version Numbering</a></li>
    <li><a class="dropdown-item" href="https://www.sqlalchemy.org/download.html#relstatus">Release Status</a></li>

                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>


<div id="main-body" class="docs main-body row m-0">

<main id="docs" class="docs">


















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">1.4.42</span>

            <span id="sidebar-current">current release</span>

        | Release Date: October 16, 2022

    </div>

    <h1><a href="https://docs.sqlalchemy.org/en/14/index.html">SQLAlchemy 1.4 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar" style="top: 10px; position: fixed;">



        <div id="docs-sidebar-popout">
            <h3><a href="https://docs.sqlalchemy.org/en/14/index.html">SQLAlchemy 1.4 Documentation</a></h3>
                <p id="sidebar-current">current release</p>
            <p id="sidebar-topnav">
                <a href="https://docs.sqlalchemy.org/en/14/index.html">Home</a>
                | <a href="https://docs.sqlalchemy.org/14/sqlalchemy_14.zip">Download this Documentation</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="https://docs.sqlalchemy.org/en/14/search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12">
                  </label>
                  <input type="hidden" name="check_keywords" value="yes">
                  <input type="hidden" name="area" value="default">
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        <script async="" type="text/javascript" src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/carbon.js" id="_carbonads_js"></script>

    
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="https://docs.sqlalchemy.org/en/14/orm/index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a>
        </h3>

        <ul>
<li class="selected"><span class="link-container"><strong>ORM Quick Start</strong><a class="paramlink headerlink reference internal" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#">¶</a></span><ul>
<li class=""><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#declare-models">Declare Models</a></span></li>
<li class=""><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#create-an-engine">Create an Engine</a></span></li>
<li class=""><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#emit-create-table-ddl">Emit CREATE TABLE DDL</a></span></li>
<li class="current"><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#create-objects-and-persist">Create Objects and Persist</a></span></li>
<li class=""><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#simple-select">Simple SELECT</a></span></li>
<li class=""><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#select-with-join">SELECT with JOIN</a></span></li>
<li class=""><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#make-changes">Make Changes</a></span></li>
<li class=""><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#some-deletes">Some Deletes</a></span></li>
<li class=""><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#learn-the-above-concepts-in-depth">Learn the above concepts in depth</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/tutorial.html">Object Relational Tutorial (1.x API)</a></span></li>
<li><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/mapper_config.html">ORM Mapped Class Configuration</a></span></li>
<li><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/relationships.html">Relationship Configuration</a></span></li>
<li><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/loading_objects.html">Querying Data, Loading Objects</a></span></li>
<li><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/session.html">Using the Session</a></span></li>
<li><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/extending.html">Events and Internals</a></span></li>
<li><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/extensions/index.html">ORM Extensions</a></span></li>
<li><span class="link-container"><a class="reference external" href="https://docs.sqlalchemy.org/en/14/orm/examples.html">ORM Examples</a></span></li>
</ul>


        <h4>Project Versions</h4>
        <ul class="version-listing"><li><a href="https://docs.sqlalchemy.org/en/20/">Version 2.0 (beta)</a></li><li><a href="https://docs.sqlalchemy.org/en/14/">Version 1.4</a></li><li><a href="https://docs.sqlalchemy.org/en/13/">Version 1.3</a></li><li><a href="https://docs.sqlalchemy.org/en/12/">Version 1.2</a></li></ul>

        </div>

        </div>

    </div>

    <div id="narrow-index-nav">
        <form class="search" action="https://docs.sqlalchemy.org/en/14/search.html" method="get">
            <label>
                Search terms:
            <input type="text" placeholder="search..." name="q" size="12">
            </label>
            <input type="submit" value="Search">
            <input type="hidden" name="check_keywords" value="yes">
            <input type="hidden" name="area" value="default">
        </form>

        <p>
        <a href="https://docs.sqlalchemy.org/en/14/index.html">Home</a>
        | <a href="https://docs.sqlalchemy.org/14/sqlalchemy_14.zip">Download this Documentation</a>
        </p>

    </div>


        <div id="docs-narrow-top-navigation">
            <ul>
                <li><b>Previous:</b>
                <a href="https://docs.sqlalchemy.org/en/14/orm/index.html" title="previous chapter">SQLAlchemy ORM</a></li>
                <li><b>Next:</b>
                <a href="https://docs.sqlalchemy.org/en/14/orm/tutorial.html" title="next chapter">Object Relational Tutorial (1.x API)</a></li>

            <li><b>Up:</b> <a href="https://docs.sqlalchemy.org/en/14/index.html">Home</a></li>
                    <ul><li><a href="https://docs.sqlalchemy.org/en/14/orm/index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a></li>
                </ul>



            <li><b>On this page:</b></li>
            <ul>
<li><a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#orm-quick-start">ORM Quick Start</a><ul>
<li><a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#declare-models">Declare Models</a></li>
<li><a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#create-an-engine">Create an Engine</a></li>
<li><a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#emit-create-table-ddl">Emit CREATE TABLE DDL</a></li>
<li><a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#create-objects-and-persist">Create Objects and Persist</a></li>
<li><a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#simple-select">Simple SELECT</a></li>
<li><a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#select-with-join">SELECT with JOIN</a></li>
<li><a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#make-changes">Make Changes</a></li>
<li><a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#some-deletes">Some Deletes</a></li>
<li><a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#learn-the-above-concepts-in-depth">Learn the above concepts in depth</a></li>
</ul>
</li>
</ul>


            </ul>

        </div>



    <div id="docs-body" role="main" class="withsidebar orm-quickstart">
        
<section id="orm-quick-start">
<span id="orm-quickstart"></span><h1>ORM Quick Start<a class="headerlink" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#orm-quick-start" title="Permalink to this heading">¶</a></h1>
<p>For new users who want to quickly see what basic ORM use looks like, here’s an
abbreviated form of the mappings and examples used in the
<a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 1.4 / 2.0 Tutorial</span></a>. The code here is fully runnable from a clean command
line.</p>
<p>As the descriptions in this section are intentionally <strong>very short</strong>, please
proceed to the full <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 1.4 / 2.0 Tutorial</span></a> for a much more in-depth
description of each of the concepts being illustrated here.</p>
<section id="declare-models">
<h2>Declare Models<a class="headerlink" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#declare-models" title="Permalink to this heading">¶</a></h2>
<p>Here, we define module-level constructs that will form the structures
which we will be querying from the database.  This structure, known as a
<a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/mapping_styles.html#orm-declarative-mapping"><span class="std std-ref">Declarative Mapping</span></a>, defines at once both a
Python object model, as well as
<a class="reference internal" href="https://docs.sqlalchemy.org/en/14/glossary.html#term-database-metadata"><span class="xref std std-term">database metadata</span></a> that describes
real SQL tables that exist, or will exist, in a particular database:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre id="codecell0"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">ForeignKey</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Integer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">String</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">declarative_base</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">relationship</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">"user_account"</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">30</span><span class="p">))</span>
<span class="gp">... </span>    <span class="n">fullname</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">addresses</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s2">"Address"</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">"user"</span><span class="p">,</span> <span class="n">cascade</span><span class="o">=</span><span class="s2">"all, delete-orphan"</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="sa">f</span><span class="s2">"User(id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">!r}</span><span class="s2">, name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">!r}</span><span class="s2">, fullname=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fullname</span><span class="si">!r}</span><span class="s2">)"</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Address</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">"address"</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">email_address</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">user_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s2">"user_account.id"</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">user</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">"User"</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s2">"addresses"</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="sa">f</span><span class="s2">"Address(id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">!r}</span><span class="s2">, email_address=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">email_address</span><span class="si">!r}</span><span class="s2">)"</span></pre><button class="copybtn o-tooltip--left" data-tooltip="Copy" data-clipboard-target="#codecell0">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copy" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <title>Copy to clipboard</title>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <rect x="8" y="8" width="12" height="12" rx="2"></rect>
  <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
</svg>
    </button></div>
</div>
<p>The mapping starts with a base class, which above is called <code class="docutils literal notranslate"><span class="pre">Base</span></code>, and is
created by calling upon the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/mapping_api.html#sqlalchemy.orm.declarative_base" title="sqlalchemy.orm.declarative_base"><code class="xref py py-func docutils literal notranslate"><span class="pre">declarative_base()</span></code></a> function, which
produces a new base class.</p>
<p>Individual mapped classes are then created by making subclasses of <code class="docutils literal notranslate"><span class="pre">Base</span></code>.
A mapped class typically refers to a single particular database table,
the name of which is indicated by using the <code class="docutils literal notranslate"><span class="pre">__tablename__</span></code> class-level
attribute.</p>
<p>Next, columns that are part of the table are declared, by adding attributes
linked to the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> construct.  <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
describes all aspects of a database column, including typing
information with type objects such as <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/type_basics.html#sqlalchemy.types.Integer" title="sqlalchemy.types.Integer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Integer</span></code></a> and <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/type_basics.html#sqlalchemy.types.String" title="sqlalchemy.types.String"><code class="xref py py-class docutils literal notranslate"><span class="pre">String</span></code></a>
as well as server defaults and
constraint information, such as membership within the primary key and foreign
keys.</p>
<p>All ORM mapped classes require at least one column be declared as part of the
primary key, typically by using the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Column.params.primary_key" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.primary_key</span></code></a>
parameter on those <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects that should be part
of the key.  In the above example, the <code class="docutils literal notranslate"><span class="pre">User.id</span></code> and <code class="docutils literal notranslate"><span class="pre">Address.id</span></code>
columns are marked as primary key.</p>
<p>Taken together, the combination of a string table name as well as a list
of column declarations is referred towards in SQLAlchemy as <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/glossary.html#term-table-metadata"><span class="xref std std-term">table metadata</span></a>.
Setting up table metadata using both Core and ORM approaches is introduced
in the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 1.4 / 2.0 Tutorial</span></a> at <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/metadata.html#tutorial-working-with-metadata"><span class="std std-ref">Working with Database Metadata</span></a>.
The above mapping is an example of what’s referred towards as
<a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/declarative_tables.html#orm-declarative-table"><span class="std std-ref">Declarative Table</span></a>
configuration.</p>
<p>Other Declarative directives are available, most commonly
the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> construct indicated above.  In contrast
to the column-based attributes, <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> denotes a linkage
between two ORM classes.  In the above example, <code class="docutils literal notranslate"><span class="pre">User.addresses</span></code> links
<code class="docutils literal notranslate"><span class="pre">User</span></code> to <code class="docutils literal notranslate"><span class="pre">Address</span></code>, and <code class="docutils literal notranslate"><span class="pre">Address.user</span></code> links <code class="docutils literal notranslate"><span class="pre">Address</span></code> to <code class="docutils literal notranslate"><span class="pre">User</span></code>.
The <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> construct is introduced in the
<a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 1.4 / 2.0 Tutorial</span></a> at <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/orm_related_objects.html#tutorial-orm-related-objects"><span class="std std-ref">Working with Related Objects</span></a>.</p>
<p>Finally, the above example classes include a <code class="docutils literal notranslate"><span class="pre">__repr__()</span></code> method, which is
not required but is useful for debugging.</p>
</section>
<section id="create-an-engine">
<h2>Create an Engine<a class="headerlink" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#create-an-engine" title="Permalink to this heading">¶</a></h2>
<p>The <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> is a <strong>factory</strong> that can create new
database connections for us, which also holds onto connections inside
of a <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/pooling.html"><span class="std std-ref">Connection Pool</span></a> for fast reuse.  For learning
purposes, we normally use a <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/dialects/sqlite.html"><span class="std std-ref">SQLite</span></a> memory-only database
for convenience:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre id="codecell1"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">"sqlite://"</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">future</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></pre><button class="copybtn o-tooltip--left" data-tooltip="Copy" data-clipboard-target="#codecell1">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copy" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <title>Copy to clipboard</title>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <rect x="8" y="8" width="12" height="12" rx="2"></rect>
  <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
</svg>
    </button></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <code class="docutils literal notranslate"><span class="pre">echo=True</span></code> parameter indicates that SQL emitted by connections will
be logged to standard out.  <code class="docutils literal notranslate"><span class="pre">future=True</span></code> is to ensure we are using
the latest SQLAlchemy <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/glossary.html#term-1"><span class="xref std std-term">2.0-style</span></a> APIs.</p>
</div>
<p>A full intro to the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> starts at <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/engine.html#tutorial-engine"><span class="std std-ref">Establishing Connectivity - the Engine</span></a>.</p>
</section>
<section id="emit-create-table-ddl">
<h2>Emit CREATE TABLE DDL<a class="headerlink" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#emit-create-table-ddl" title="Permalink to this heading">¶</a></h2>
<p>Using our table metadata and our engine, we can generate our schema at once
in our target SQLite database, using a method called <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData.create_all" title="sqlalchemy.schema.MetaData.create_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.create_all()</span></code></a>:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre id="codecell2"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
<div class="show_sql"><span class="k">BEGIN</span><span class="w"> </span><span class="p">(</span><span class="k">implicit</span><span class="p">)</span><span class="w"></span>
<span class="n">PRAGMA</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">table_</span><span class="p">...</span><span class="n">info</span><span class="p">(</span><span class="ss">"user_account"</span><span class="p">)</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
<span class="n">PRAGMA</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">table_</span><span class="p">...</span><span class="n">info</span><span class="p">(</span><span class="ss">"address"</span><span class="p">)</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">user_account</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">fullname</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">email_address</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">user_id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">user_account</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
<span class="k">COMMIT</span><span class="w"></span>
</div></pre><button class="copybtn o-tooltip--left" data-tooltip="Copy" data-clipboard-target="#codecell2">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copy" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <title>Copy to clipboard</title>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <rect x="8" y="8" width="12" height="12" rx="2"></rect>
  <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
</svg>
    </button></div>
</div>
<p>A lot just happened from that bit of Python code we wrote.  For a complete
overview of what’s going on on with Table metadata, proceed in the
Tutorial at <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/metadata.html#tutorial-working-with-metadata"><span class="std std-ref">Working with Database Metadata</span></a>.</p>
</section>
<section id="create-objects-and-persist">
<h2>Create Objects and Persist<a class="headerlink" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#create-objects-and-persist" title="Permalink to this heading">¶</a></h2>
<p>We are now ready to insert data in the database.  We accomplish this by
creating instances of <code class="docutils literal notranslate"><span class="pre">User</span></code> and <code class="docutils literal notranslate"><span class="pre">Address</span></code> classes, which have
an <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> method already as established automatically by the
declarative mapping process.  We then pass them
to the database using an object called a <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/dbapi_transactions.html#tutorial-executing-orm-session"><span class="std std-ref">Session</span></a>,
which makes use of the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> to interact with the
database.  The <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session.add_all" title="sqlalchemy.orm.Session.add_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add_all()</span></code></a> method is used here to add
multiple objects at once, and the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session.commit" title="sqlalchemy.orm.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code></a> method
will be used to <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_basics.html#session-flushing"><span class="std std-ref">flush</span></a> any pending changes to the
database and then <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_basics.html#session-committing"><span class="std std-ref">commit</span></a> the current database
transaction, which is always in progress whenever the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
is used:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre id="codecell3"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">Session</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">spongebob</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">name</span><span class="o">=</span><span class="s2">"spongebob"</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">fullname</span><span class="o">=</span><span class="s2">"Spongebob Squarepants"</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">addresses</span><span class="o">=</span><span class="p">[</span><span class="n">Address</span><span class="p">(</span><span class="n">email_address</span><span class="o">=</span><span class="s2">"spongebob@sqlalchemy.org"</span><span class="p">)],</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span>    <span class="n">sandy</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">name</span><span class="o">=</span><span class="s2">"sandy"</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">fullname</span><span class="o">=</span><span class="s2">"Sandy Cheeks"</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">addresses</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>            <span class="n">Address</span><span class="p">(</span><span class="n">email_address</span><span class="o">=</span><span class="s2">"sandy@sqlalchemy.org"</span><span class="p">),</span>
<span class="gp">... </span>            <span class="n">Address</span><span class="p">(</span><span class="n">email_address</span><span class="o">=</span><span class="s2">"sandy@squirrelpower.org"</span><span class="p">),</span>
<span class="gp">... </span>        <span class="p">],</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span>    <span class="n">patrick</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"patrick"</span><span class="p">,</span> <span class="n">fullname</span><span class="o">=</span><span class="s2">"Patrick Star"</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">session</span><span class="o">.</span><span class="n">add_all</span><span class="p">([</span><span class="n">spongebob</span><span class="p">,</span> <span class="n">sandy</span><span class="p">,</span> <span class="n">patrick</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<div class="show_sql"><span class="k">BEGIN</span><span class="w"> </span><span class="p">(</span><span class="k">implicit</span><span class="p">)</span><span class="w"></span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">user_account</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">fullname</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="s1">'spongebob'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Spongebob Squarepants'</span><span class="p">)</span><span class="w"></span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">user_account</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">fullname</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="s1">'sandy'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Sandy Cheeks'</span><span class="p">)</span><span class="w"></span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">user_account</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">fullname</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="s1">'patrick'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Patrick Star'</span><span class="p">)</span><span class="w"></span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="p">(</span><span class="n">email_address</span><span class="p">,</span><span class="w"> </span><span class="n">user_id</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="s1">'spongebob@sqlalchemy.org'</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="p">(</span><span class="n">email_address</span><span class="p">,</span><span class="w"> </span><span class="n">user_id</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="s1">'sandy@sqlalchemy.org'</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="p">(</span><span class="n">email_address</span><span class="p">,</span><span class="w"> </span><span class="n">user_id</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="s1">'sandy@squirrelpower.org'</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<span class="k">COMMIT</span><span class="w"></span>
</div></pre><button class="copybtn o-tooltip--left" data-tooltip="Copy" data-clipboard-target="#codecell3">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copy" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <title>Copy to clipboard</title>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <rect x="8" y="8" width="12" height="12" rx="2"></rect>
  <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
</svg>
    </button></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It’s recommended that the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> be used in context
manager style as above, that is, using the Python <code class="docutils literal notranslate"><span class="pre">with:</span></code> statement.
The <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object represents active database resources
so it’s good to make sure it’s closed out when a series of operations
are completed.  In the next section, we’ll keep a <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
opened just for illustration purposes.</p>
</div>
<p>Basics on creating a <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> are at
<a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/dbapi_transactions.html#tutorial-executing-orm-session"><span class="std std-ref">Executing with an ORM Session</span></a> and more at <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_basics.html#id1"><span class="std std-ref">Basics of Using a Session</span></a>.</p>
<p>Then, some varieties of basic persistence operations are introduced
at <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/orm_data_manipulation.html#tutorial-inserting-orm"><span class="std std-ref">Inserting Rows with the ORM</span></a>.</p>
</section>
<section id="simple-select">
<h2>Simple SELECT<a class="headerlink" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#simple-select" title="Permalink to this heading">¶</a></h2>
<p>With some rows in the database, here’s the simplest form of emitting a SELECT
statement to load some objects. To create SELECT statements, we use the
<a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> function to create a new <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a> object, which
we then invoke using a <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>. The method that is often useful
when querying for ORM objects is the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session.scalars" title="sqlalchemy.orm.Session.scalars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.scalars()</span></code></a> method, which
will return a <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/connections.html#sqlalchemy.engine.ScalarResult" title="sqlalchemy.engine.ScalarResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScalarResult</span></code></a> object that will iterate through
the ORM objects we’ve selected:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre id="codecell4"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">in_</span><span class="p">([</span><span class="s2">"spongebob"</span><span class="p">,</span> <span class="s2">"sandy"</span><span class="p">]))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<div class="show_sql"><span class="k">BEGIN</span><span class="w"> </span><span class="p">(</span><span class="k">implicit</span><span class="p">)</span><span class="w"></span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">fullname</span><span class="w"></span>
<span class="k">FROM</span><span class="w"> </span><span class="n">user_account</span><span class="w"></span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="s1">'spongebob'</span><span class="p">,</span><span class="w"> </span><span class="s1">'sandy'</span><span class="p">)</span><span class="w"></span>
</div><span class="go">User(id=1, name='spongebob', fullname='Spongebob Squarepants')</span>
<span class="go">User(id=2, name='sandy', fullname='Sandy Cheeks')</span></pre><button class="copybtn o-tooltip--left" data-tooltip="Copy" data-clipboard-target="#codecell4">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copy" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <title>Copy to clipboard</title>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <rect x="8" y="8" width="12" height="12" rx="2"></rect>
  <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
</svg>
    </button></div>
</div>
<p>The above query also made use of the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/selectable.html#sqlalchemy.sql.expression.Select.where" title="sqlalchemy.sql.expression.Select.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.where()</span></code></a> method
to add WHERE criteria, and also used the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/sqlelement.html#sqlalchemy.sql.expression.ColumnOperators.in_" title="sqlalchemy.sql.expression.ColumnOperators.in_"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnOperators.in_()</span></code></a>
method that’s part of all SQLAlchemy column-like constructs to use the
SQL IN operator.</p>
<p>More detail on how to select objects and individual columns is at
<a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/data_select.html#tutorial-selecting-orm-entities"><span class="std std-ref">Selecting ORM Entities and Columns</span></a>.</p>
</section>
<section id="select-with-join">
<h2>SELECT with JOIN<a class="headerlink" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#select-with-join" title="Permalink to this heading">¶</a></h2>
<p>It’s very common to query amongst multiple tables at once, and in SQL
the JOIN keyword is the primary way this happens.   The <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a>
construct creates joins using the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/selectable.html#sqlalchemy.sql.expression.Select.join" title="sqlalchemy.sql.expression.Select.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.join()</span></code></a> method:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre id="codecell5"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">select</span><span class="p">(</span><span class="n">Address</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">Address</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"sandy"</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">Address</span><span class="o">.</span><span class="n">email_address</span> <span class="o">==</span> <span class="s2">"sandy@sqlalchemy.org"</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sandy_address</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>
<div class="show_sql"><span class="k">SELECT</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">email_address</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">user_id</span><span class="w"></span>
<span class="k">FROM</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">user_account</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">user_id</span><span class="w"></span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="s1">'sandy'</span><span class="p">,</span><span class="w"> </span><span class="s1">'sandy@sqlalchemy.org'</span><span class="p">)</span><span class="w"></span>
</div><span class="gp">&gt;&gt;&gt; </span><span class="n">sandy_address</span>
<span class="go">Address(id=2, email_address='sandy@sqlalchemy.org')</span></pre><button class="copybtn o-tooltip--left" data-tooltip="Copy" data-clipboard-target="#codecell5">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copy" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <title>Copy to clipboard</title>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <rect x="8" y="8" width="12" height="12" rx="2"></rect>
  <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
</svg>
    </button></div>
</div>
<p>The above query illustrates multiple WHERE criteria which are automatically
chained together using AND, as well as how to use SQLAlchemy column-like
objects to create “equality” comparisons, which uses the overridden Python
method <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/core/sqlelement.html#sqlalchemy.sql.expression.ColumnOperators.__eq__" title="sqlalchemy.sql.expression.ColumnOperators.__eq__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnOperators.__eq__()</span></code></a> to produce a SQL criteria object.</p>
<p>Some more background on the concepts above are at
<a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/data_select.html#tutorial-select-where-clause"><span class="std std-ref">The WHERE clause</span></a> and <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/data_select.html#tutorial-select-join"><span class="std std-ref">Explicit FROM clauses and JOINs</span></a>.</p>
</section>
<section id="make-changes">
<h2>Make Changes<a class="headerlink" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#make-changes" title="Permalink to this heading">¶</a></h2>
<p>The <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object, in conjunction with our ORM-mapped classes
<code class="docutils literal notranslate"><span class="pre">User</span></code> and <code class="docutils literal notranslate"><span class="pre">Address</span></code>, automatically track changes to the objects as they
are made, which result in SQL statements that will be emitted the next
time the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> flushes.   Below, we change one email
address associated with “sandy”, and also add a new email address to
“patrick”, after emitting a SELECT to retrieve the row for “patrick”:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre id="codecell6"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">"patrick"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">patrick</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>
<div class="show_sql"><span class="k">SELECT</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">fullname</span><span class="w"></span>
<span class="k">FROM</span><span class="w"> </span><span class="n">user_account</span><span class="w"></span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="s1">'patrick'</span><span class="p">,)</span><span class="w"></span>
</div><span class="gp">&gt;&gt;&gt; </span><span class="n">patrick</span><span class="o">.</span><span class="n">addresses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Address</span><span class="p">(</span><span class="n">email_address</span><span class="o">=</span><span class="s2">"patrickstar@sqlalchemy.org"</span><span class="p">))</span>
<div class="show_sql"><span class="k">SELECT</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">address_id</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">address_email_address</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">address_user_id</span><span class="w"></span>
<span class="k">FROM</span><span class="w"> </span><span class="n">address</span><span class="w"></span>
<span class="k">WHERE</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">user_id</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="p">,)</span><span class="w"></span>
</div><span class="gp">&gt;&gt;&gt; </span><span class="n">sandy_address</span><span class="o">.</span><span class="n">email_address</span> <span class="o">=</span> <span class="s2">"sandy_cheeks@sqlalchemy.org"</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<div class="show_sql"><span class="k">UPDATE</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">email_address</span><span class="o">=?</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="s1">'sandy_cheeks@sqlalchemy.org'</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="p">(</span><span class="n">email_address</span><span class="p">,</span><span class="w"> </span><span class="n">user_id</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">)</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="s1">'patrickstar@sqlalchemy.org'</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"></span>
<span class="k">COMMIT</span><span class="w"></span>
</div></pre><button class="copybtn o-tooltip--left" data-tooltip="Copy" data-clipboard-target="#codecell6">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copy" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <title>Copy to clipboard</title>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <rect x="8" y="8" width="12" height="12" rx="2"></rect>
  <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
</svg>
    </button></div>
</div>
<p>Notice when we accessed <code class="docutils literal notranslate"><span class="pre">patrick.addresses</span></code>, a SELECT was emitted.  This is
called a <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/glossary.html#term-lazy-load"><span class="xref std std-term">lazy load</span></a>.   Background on different ways to access related
items using more or less SQL is introduced at <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/orm_related_objects.html#tutorial-orm-loader-strategies"><span class="std std-ref">Loader Strategies</span></a>.</p>
<p>A detailed walkthrough on ORM data manipulation starts at
<a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/orm_data_manipulation.html#tutorial-orm-data-manipulation"><span class="std std-ref">Data Manipulation with the ORM</span></a>.</p>
</section>
<section id="some-deletes">
<h2>Some Deletes<a class="headerlink" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#some-deletes" title="Permalink to this heading">¶</a></h2>
<p>All things must come to an end, as is the case for some of our database
rows - here’s a quick demonstration of two different forms of deletion, both
of which are important based on the specific use case.</p>
<p>First we will remove one of the <code class="docutils literal notranslate"><span class="pre">Address</span></code> objects from the “sandy” user.
When the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session" title="sqlalchemy.orm.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> next flushes, this will result in the
row being deleted.   This behavior is something that we configured in our
mapping called the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/cascades.html#cascade-delete"><span class="std std-ref">delete cascade</span></a>.  We can get a handle to the <code class="docutils literal notranslate"><span class="pre">sandy</span></code>
object by primary key using <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session.get" title="sqlalchemy.orm.Session.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.get()</span></code></a>, then work with the object:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre id="codecell7"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sandy</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<div class="show_sql"><span class="k">BEGIN</span><span class="w"> </span><span class="p">(</span><span class="k">implicit</span><span class="p">)</span><span class="w"></span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">user_account_id</span><span class="p">,</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">user_account_name</span><span class="p">,</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">fullname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">user_account_fullname</span><span class="w"></span>
<span class="k">FROM</span><span class="w"> </span><span class="n">user_account</span><span class="w"></span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">,)</span><span class="w"></span>
</div><span class="gp">&gt;&gt;&gt; </span><span class="n">sandy</span><span class="o">.</span><span class="n">addresses</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">sandy_address</span><span class="p">)</span>
<div class="show_sql"><span class="k">SELECT</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">address_id</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">address_email_address</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">address_user_id</span><span class="w"></span>
<span class="k">FROM</span><span class="w"> </span><span class="n">address</span><span class="w"></span>
<span class="k">WHERE</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">user_id</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">,)</span><span class="w"></span>
</div></pre><button class="copybtn o-tooltip--left" data-tooltip="Copy" data-clipboard-target="#codecell7">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copy" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <title>Copy to clipboard</title>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <rect x="8" y="8" width="12" height="12" rx="2"></rect>
  <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
</svg>
    </button></div>
</div>
<p>The last SELECT above was the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/glossary.html#term-lazy-load"><span class="xref std std-term">lazy load</span></a> operation proceeding so that
the <code class="docutils literal notranslate"><span class="pre">sandy.addresses</span></code> collection could be loaded, so that we could remove the
<code class="docutils literal notranslate"><span class="pre">sandy_address</span></code> member.  There are other ways to go about this series
of operations that won’t emit as much SQL.</p>
<p>We can choose to emit the DELETE SQL for what’s set to be changed so far, without
committing the transaction, using the
<a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session.flush" title="sqlalchemy.orm.Session.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.flush()</span></code></a> method:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre id="codecell8"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
<div class="show_sql"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">,)</span><span class="w"></span>
</div></pre><button class="copybtn o-tooltip--left" data-tooltip="Copy" data-clipboard-target="#codecell8">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copy" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <title>Copy to clipboard</title>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <rect x="8" y="8" width="12" height="12" rx="2"></rect>
  <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
</svg>
    </button></div>
</div>
<p>Next, we will delete the “patrick” user entirely.  For a top-level delete of
an object by itself, we use the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session.delete" title="sqlalchemy.orm.Session.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.delete()</span></code></a> method; this
method doesn’t actually perform the deletion, but sets up the object
to be deleted on the next flush.  The
operation will also <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/glossary.html#term-cascade"><span class="xref std std-term">cascade</span></a> to related objects based on the cascade
options that we configured, in this case, onto the related <code class="docutils literal notranslate"><span class="pre">Address</span></code> objects:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre id="codecell9"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">patrick</span><span class="p">)</span>
<div class="show_sql"><span class="k">SELECT</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">user_account_id</span><span class="p">,</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">user_account_name</span><span class="p">,</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">fullname</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">user_account_fullname</span><span class="w"></span>
<span class="k">FROM</span><span class="w"> </span><span class="n">user_account</span><span class="w"></span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="p">,)</span><span class="w"></span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">address_id</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">email_address</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">address_email_address</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">address_user_id</span><span class="w"></span>
<span class="k">FROM</span><span class="w"> </span><span class="n">address</span><span class="w"></span>
<span class="k">WHERE</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">user_id</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="p">,)</span><span class="w"></span>
</div></pre><button class="copybtn o-tooltip--left" data-tooltip="Copy" data-clipboard-target="#codecell9">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copy" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <title>Copy to clipboard</title>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <rect x="8" y="8" width="12" height="12" rx="2"></rect>
  <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
</svg>
    </button></div>
</div>
<p>The <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session.delete" title="sqlalchemy.orm.Session.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.delete()</span></code></a> method in this particular case emitted two
SELECT statements, even though it didn’t emit a DELETE, which might seem surprising.
This is because when the method went to inspect the object, it turns out the
<code class="docutils literal notranslate"><span class="pre">patrick</span></code> object was <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/glossary.html#term-expired"><span class="xref std std-term">expired</span></a>, which happened when we last called upon
<a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_api.html#sqlalchemy.orm.Session.commit" title="sqlalchemy.orm.Session.commit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.commit()</span></code></a>, and the SQL emitted was to re-load the rows
from the new transaction.   This expiration is optional, and in normal
use we will often be turning it off for situations where it doesn’t apply well.</p>
<p>To illustrate the rows being deleted, here’s the commit:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre id="codecell10"><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<div class="show_sql"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="p">,)</span><span class="w"></span>
<span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">user_account</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">user_account</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"></span>
<span class="p">[...]</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="p">,)</span><span class="w"></span>
<span class="k">COMMIT</span><span class="w"></span>
</div></pre><button class="copybtn o-tooltip--left" data-tooltip="Copy" data-clipboard-target="#codecell10">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copy" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <title>Copy to clipboard</title>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <rect x="8" y="8" width="12" height="12" rx="2"></rect>
  <path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path>
</svg>
    </button></div>
</div>
<p>The Tutorial discusses ORM deletion at <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/orm_data_manipulation.html#tutorial-orm-deleting"><span class="std std-ref">Deleting ORM Objects</span></a>.
Background on object expiration is at <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/session_basics.html#session-expiring"><span class="std std-ref">Expiring / Refreshing</span></a>; cascades
are discussed in depth at <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/orm/cascades.html#unitofwork-cascades"><span class="std std-ref">Cascades</span></a>.</p>
</section>
<section id="learn-the-above-concepts-in-depth">
<h2>Learn the above concepts in depth<a class="headerlink" href="https://docs.sqlalchemy.org/en/14/orm/quickstart.html#learn-the-above-concepts-in-depth" title="Permalink to this heading">¶</a></h2>
<p>For a new user, the above sections were likely a whirlwind tour.   There’s a
lot of important concepts in each step above that weren’t covered.   With a
quick overview of what things look like, it’s recommended to work through
the <a class="reference internal" href="https://docs.sqlalchemy.org/en/14/tutorial/index.html#unified-tutorial"><span class="std std-ref">SQLAlchemy 1.4 / 2.0 Tutorial</span></a> to gain a solid working knowledge of what’s
really going on above.  Good luck!</p>
</section>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="https://docs.sqlalchemy.org/en/14/orm/index.html" title="previous chapter">SQLAlchemy ORM</a>
        Next:
        <a href="https://docs.sqlalchemy.org/en/14/orm/tutorial.html" title="next chapter">Object Relational Tutorial (1.x API)</a>

    <div id="docs-copyright">
        © <a href="https://docs.sqlalchemy.org/en/14/copyright.html">Copyright</a> 2007-2022, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 5.1.1.

    Documentation last generated: Wed 19 Oct 2022 10:42:28 AM 

    </div>
</div>

</div>




</main></div>

</div> <!-- end #main-body -->


    

    

<div id="footer" class="footer">
    <div class="snd-ad">
    <div class="box banner">
        <p>
        </p><div class="bsa-ad">
      <div class="partner">
        <p>SQLAlchemy <strong>Sponsors</strong></p>
      </div>
      <div class="bsa-cpc"></div>
    </div>
    <script src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/monetization.js" type="text/javascript"></script>
    <script>
    (function() {
      if (typeof _bsa !== 'undefined' && _bsa) {
        _bsa.init('default', 'CKYD62QL', 'placement:sqlalchemyorg', {
          target: '.bsa-cpc',
          align: 'horizontal',
          disable_css: 'true'
        });
      }
    })();
    window.onload = function() {
      if (document.getElementsByClassName("_default_").length > 0) {
        document.getElementsByClassName("bsa-ad")[0].style.display = "flex";
      }
    }
    </script>
        <p></p>
    </div>
    </div>
    <div class="pypowered">
        <a href="http://www.python.org/" title="The Python Language Site">
            <img src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/python-logo.gif" width="88" height="30" alt="Python" class="pypowered">
        </a>
    </div>

    <div class="copyright">
        <p>Website content copyright © by SQLAlchemy authors and contributors.
            SQLAlchemy and its documentation are licensed under the MIT license.</p>
        <p>SQLAlchemy is a trademark of Michael Bayer.  mike(&amp;)zzzcomputing.com
        All rights reserved. </p>
        <p>Website generation by
        <a href="https://github.com/sqlalchemyorg/zeekofile/">zeekofile</a>, with
        huge thanks to the <a href="https://github.com/EnigmaCurry/blogofile">Blogofile</a>
        project.</p>
    </div>

    <br clear="all">

</div>



     <!-- End original user content -->

    




 <!-- end #wrap -->


    

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '1.4.42',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../" src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/documentation_options.js"></script>
        <script type="text/javascript" src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/jquery.js"></script>
        <script type="text/javascript" src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/underscore.js"></script>
        <script type="text/javascript" src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/_sphinx_javascript_frameworks_compat.js"></script>
        <script type="text/javascript" src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/doctools.js"></script>
        <script type="text/javascript" src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/clipboard.min.js"></script>
        <script type="text/javascript" src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/copybutton.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/init.js"></script>




<script type="text/javascript" src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/bootstrap.bundle.min.js"></script>
<script type="text/javascript" src="./ORM Quick Start — SQLAlchemy 1.4 Documentation_files/doc_versions.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-28532944-1']);
  _gaq.push(['_setDomainName', 'sqlalchemy.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>




</body></html>